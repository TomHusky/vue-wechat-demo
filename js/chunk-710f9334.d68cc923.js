(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-710f9334"],{"0faa":function(t,e,n){"use strict";n("1851")},1851:function(t,e,n){},3378:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"wechat"}},[t.network?t._e():n("div",{staticClass:"network-bar"},[t._m(0)]),n("div",{staticClass:"sidebar"},[n("MyCard")],1),n("div",{staticClass:"main"},[n("div",{staticClass:"systemBottom"},[n("i",{staticClass:"icon iconfont icon-window-ding"}),n("i",{staticClass:"icon iconfont icon-window-min"}),n("i",{staticClass:"icon iconfont icon-window-max"}),n("i",{staticClass:"icon iconfont icon-close close",on:{click:t.exit}})]),n("router-view")],1),n("HeadMenu",{staticClass:"right-menu",attrs:{id:"friendHeadMenu",refId:"friendHeadMenu"}})],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("i",{staticClass:"icon iconfont icon-warn"}),t._v("连接失败，请检查你的网络或刷新页面 ")])}],a=n("5530"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.user&&t.headMenu.visible?n("div",{staticClass:"headmenu",style:{left:t.menuPosition.clientX+"px",top:t.menuPosition.clientY+"px"}},[n("div",{staticClass:"esInfo"},[n("div",{staticClass:"left"},[n("div",{staticClass:"people"},[n("div",{staticClass:"nickname"},[t._v(t._s(t.user.nickname))]),n("div",{class:[1===t.user.sex?"gender-male":"gender-female"]}),n("div",{staticClass:"infoItem"},[n("div",{staticClass:"item wxid"},[n("div",{staticClass:"lable",staticStyle:{width:"40px"}},[t._v("微信号:")]),n("div",{staticClass:"lable",staticStyle:{"margin-left":"5px"}},[t._v(t._s(t.user.wxid))])])])])]),n("div",{staticClass:"right"},[n("img",{staticClass:"avatar",attrs:{width:"60",height:"60",src:t.user.avatar}})])]),n("div",{staticClass:"division"}),n("div",{staticClass:"infoItem"},[t.headMenu.self||null==t.user.remark?t._e():n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("备 注")]),n("span",{staticClass:"value editText",attrs:{contentEditable:!t.headMenu.self&&null!=t.user.initial&&""!==t.user.initial.trim()},on:{blur:function(e){return t.updateRemark(e)}}},[t._v(t._s(t.user.remark))])]),2==t.headMenu.type?n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("群昵称")]),n("span",{staticClass:"value"},[t._v("白云三手房东")])]):t._e(),n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("地 区")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.area))])]),t.headMenu.self||null==t.user.origin?t._e():n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("来 源")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.origin))])]),null!=t.user.label?n("div",{staticClass:"item"},[n("span",{staticClass:"lable"},[t._v("标 签")]),n("span",{staticClass:"value"},[t._v(t._s(t.user.label))])]):t._e()]),n("div",{staticClass:"signature",class:{editText:t.headMenu.self},attrs:{contentEditable:t.headMenu.self},on:{blur:function(e){return t.updateSignature(e)}}},[t._v(" "+t._s(t.user.signature)+" ")]),n("div",{staticClass:"division"}),t.isFriend||t.isSelf?t._e():n("div",{staticClass:"send"},[n("span",[t._v("添加到通讯录")])]),t.isFriend?n("div",{staticClass:"send",on:{click:t.send}},[n("span",[t._v("发消息")])]):t._e(),t.isSelf?n("div",{staticClass:"send"},[n("span",[t._v("发消息")])]):t._e()]):t._e()},o=[],c=(n("498a"),n("2f62")),u={name:"HeadMenu",props:{refId:{type:String,default:"headMenu"},offset:{type:Object,default:function(){return{clientX:0,clientY:0}}}},data:function(){return{}},computed:Object(a["a"])(Object(a["a"])(Object(a["a"])({},Object(c["d"])({headMenu:function(t){return t.system.headMenu}})),Object(c["c"])({selectedFriendByUsername:"friend/selectedFriendByUsername",getChatByChatId:"chat/getChatByChatId",selectedChat:"chat/selectedChat"})),{},{menuPosition:function(){var t=this.$store.state.system.windowWidth,e={clientX:this.headMenu.clientX,clientY:this.headMenu.clientY};return t-this.headMenu.clientX<300&&(e.clientX=this.headMenu.clientX-300),e},user:function(){return this.headMenu.info},isFriend:function(){var t=this.selectedFriendByUsername(this.headMenu.info.username);return null!=t},self:function(){return this.$store.state.user.info},isSelf:function(){return this.headMenu.info.username===this.self.username}}),watch:{headMenu:function(t){t.visible&&!t.self&&null!=t.info.initial&&t.info.initial.trim()}},mounted:function(){document.addEventListener("click",this.closeMenu)},destroyed:function(){document.removeEventListener("click",this.closeMenu)},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])({updateFriend:"friend/updateFriend",setUserInfo:"user/setUserInfo"})),{},{closeMenu:function(t){var e=document.getElementById(this.refId);e&&(e.contains(t.target)||(this.headMenu.visibleIng?this.headMenu.visibleIng=!1:(this.headMenu.visible=!1,this.$store.commit("system/setHeadMenu",this.headMenu))))},updateRemark:function(t){var e=t.target.innerText.trim();""!==e?this.user.remark:t.target.innerText=this.user.remark},updateSignature:function(t){var e=t.target.innerText.trim();if(""!==e){if(e!==this.user.signature);}else t.target.innerText=this.user.signature},send:function(){var t=this.user,e=this.getChatByChatId(t.username);if(this.selectedChat.chatId===t.username)return this.headMenu.visibleIng=!1,void(this.headMenu.visible=!1);if(e)this.$store.dispatch("chat/selectSession",e.info.username);else{var n=this.selectedFriendByUsername(t.username);this.$store.dispatch("friend/selectFriend",n.username);var i={type:1,chatId:n.username,info:{username:n.username,nickname:n.nickname,avatar:n.avatar,remark:n.remark,notDisturb:!1},newMsgNum:0,lastMsgTime:new Date,messages:[{type:1,content:"已经置顶聊天，可以给我发信息啦！",date:new Date}]};this.$store.dispatch("chat/topChat",i),this.$store.dispatch("chat/selectSession",n.username)}this.headMenu.visibleIng=!1,this.headMenu.visible=!1}})},l=u,d=(n("7753"),n("2877")),h=Object(d["a"])(l,r,o,!1,null,"85191784",null),f=h.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"drag",rawName:"v-drag"}],staticClass:"mycard selectNone"},[n("header",[n("img",{staticClass:"avatar",attrs:{id:"headMenu",src:t.getUser.avatar},on:{click:function(e){return e.preventDefault(),t.openMenu(e)}}})]),n("div",{staticClass:"navbar",on:{click:t.clearSearch}},[n("router-link",{staticClass:"icon iconfont icon-msg",attrs:{to:"/chat"}},[t.getTotalNewMsgs>0?n("Badge",{attrs:{count:t.getTotalNewMsgs,overflowCount:99,width:16,height:16}}):t._e()],1),n("router-link",{staticClass:"icon iconfont icon-friend",attrs:{to:"/friend"}},[t.getNewFriendNums>0?n("Badge",{attrs:{count:t.getNewFriendNums,overflowCount:99,width:16,height:16}}):t._e()],1),n("router-link",{staticClass:"icon iconfont icon-collection",attrs:{to:"/game"}})],1),t._m(0)])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",[n("i",{staticClass:"icon iconfont icon-san"})])}],g=n("ff9f"),p={components:{Badge:g["a"]},computed:Object(a["a"])({},Object(c["c"])({getNewFriendNums:"friend/getNewFriendNums",getTotalNewMsgs:"chat/getTotalNewMsgs",getUser:"user/getUser"})),data:function(){return{}},methods:{clearSearch:function(){this.$store.dispatch("system/search","")},openMenu:function(t){var e={clientX:t.clientX,clientY:t.clientY,self:!0,visible:!0,visibleIng:!0,info:this.getUser};this.$store.commit("system/setHeadMenu",e)}}},w=p,b=(n("0faa"),Object(d["a"])(w,m,v,!1,null,"61e24b66",null)),C=b.exports,y=(n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("06c5"));function _(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(y["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var i=0,s=function(){};return{s:s,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,a=t},f:function(){try{r||null==n["return"]||n["return"]()}finally{if(o)throw a}}}}var M=n("4360");function x(){j(),I()}function N(){k()}function k(){M["a"].state.system.systemFileIcon}function j(){}function I(){var t,e=_(M["a"].state.groupchat.groupChatList);try{for(e.s();!(t=e.n()).done;){var n=t.value,i=M["a"].getters["user/getUser"];i.groupNickname=i.nickname;var s={groupNo:n.groupNo,user:i};M["a"].commit("groupchat/groupAddUser",s)}}catch(a){e.e(a)}finally{e.f()}}var O=n("c276"),H={components:{MyCard:C,HeadMenu:f},data:function(){return{moveDataelse:{x:null,y:null}}},computed:Object(a["a"])({},Object(c["d"])({network:function(t){return t.system.network}})),created:function(){x(),N(),this.allowNotification()},beforeMount:function(){Object(O["a"])()},mounted:function(){var t=this;t.updateAppPosition(document.documentElement.clientWidth,document.documentElement.clientHeight),window.onresize=function(){return function(){window.fullHeight=document.documentElement.clientHeight,window.fullWidth=document.documentElement.clientWidth,t.$store.commit("system/setWindowWidth",window.fullWidth),t.$store.commit("system/setwindowHeight",window.fullHeight),t.updateAppPosition(window.fullWidth,window.fullHeight)}()}},methods:Object(a["a"])(Object(a["a"])({},Object(c["b"])({handleLogout:"user/handleLogout"})),{},{allowNotification:function(){var t=this;if("Notification"in window){var e=Notification.permission;"granted"!==e&&Notification.requestPermission((function(e){"granted"!==e&&t.$message({content:"无法提示新消息！",time:2500,type:"warning",hasClose:!0})}))}else this.$message({content:"浏览器不支持消息通知",time:2500,type:"warning",hasClose:!0})},updateAppPosition:function(t,e){var n=document.getElementById("wechat");n.style.left=(t-n.offsetWidth)/2+"px",n.style.top=(e-n.offsetHeight)/2+"px"},exit:function(){this.handleLogout(),this.$router.push({path:"/login"})}})},$=H,E=(n("3ae9"),Object(d["a"])($,i,s,!1,null,"0ed2a8bc",null));e["default"]=E.exports},"3ae9":function(t,e,n){"use strict";n("a47f")},7159:function(t,e,n){},7753:function(t,e,n){"use strict";n("7159")},8935:function(t,e,n){"use strict";n("eacc")},a47f:function(t,e,n){},eacc:function(t,e,n){},ff9f:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"badge",style:{width:t.getWidth+"px",height:t.getHeight+"px",right:"-"+t.getWidth/2+"px",top:"-"+t.getHeight/2+"px",borderRadius:t.getWidth+"px"}},[t.showNum?n("span",{style:{width:t.getWidth+"px",height:t.getHeight+"px",lineHeight:t.getHeight+"px",transformOrigin:t.getWidth/2+"px "+t.getHeight/2+"px"}},[t._v(" "+t._s(t.getShowNum))]):t._e()])},s=[],a=(n("a9e3"),{model:{prop:"checked",event:"change"},props:{width:{type:Number,default:16},height:{type:Number,default:16},count:{type:Number,default:null},overflowCount:{type:Number,default:99},showNum:{type:Boolean,default:!0}},computed:{getWidth:function(){if(!this.showNum)return 10;var t=this.width;return this.count>9&&this.count<100&&(t+=4),this.count>99&&(t+=8),t},getHeight:function(){return this.showNum?this.height:10},getShowNum:function(){return this.count>this.overflowCount?this.overflowCount+"+":this.count}}}),r=a,o=(n("8935"),n("2877")),c=Object(o["a"])(r,i,s,!1,null,"56013c3e",null);e["a"]=c.exports}}]);